{% extends 'layout.html' %}
{% block body%}
<style>
    .chosen-select{
        width:100%;
    }
</style>
<div style="border-radius: 25px;position: fixed;
  right: 50px; top:100px;display: flex;
    flex-direction: column;">
                    <label for="">Total records</label>
                    <div style="border-color:blue;border: 2px solid blue; text-align: center; border-radius: 25px;">{{count_record}}</div>
                </div>
<div style="border-radius: 25px;position: fixed;
  right: 50px; top:300px;display: flex;
    flex-direction: column;">
  <div>
      <input type="radio" checked="checked" name="radio" id="stone1" onclick="window.location='/updateaccount/4';">
    <label >No Filter
    </label>
  </div>
<div>
    <input type="radio" checked="checked" name="radio" id="ndone2" onclick="window.location='/updateaccount/1';">
    <label >UP ACCS
    </label>
  </div>
<div>
    <input type="radio" checked="checked" name="radio" id="rdone3" onclick="window.location='/updateaccount/2';">
    <label >EXIT RATE ACCS
    </label>
  </div>
<div>
    <input type="radio" checked="checked" name="radio" id="thone4" onclick="window.location='/updateaccount/3';">
    <label >OPTIES ACCS
    </label>
  </div>

<!--    <div style="background: blue;-->
<!--    color: white;-->
<!--    font-weight: 800; border-radius: 25px; padding: 3px; text-align:center" >Filters</div>-->

<!--                    <button id="nofilter"-->
<!--                    class="FilterTabActive"><a href="/updateaccount/4"> No Filter</a></button>-->
<!--                    <button id="upaccs" ><a href="/updateaccount/1">-->
<!--                         UP ACCS-->
<!--                    </a>-->
<!--                    </button>-->
<!--                    <button id="exitrate"><a href="/updateaccount/2"> EXIT RATE ACCS</a></button>-->
<!--                    <button id="optiesaccs"><a href="/updateaccount/3"> OPTIES ACCS-->
<!--                    </a></button>-->
</div>
        <!-- Main Content -->
        {% if messages %}  <script>alert("{{ messages }}")</script> {% endif %}
        <div class="Main-container" style="margin-top:30px; ">
<!--            <div>-->
<!--                <ul class="Filter-Tabs">-->
<!--                    <li id="nofilter"-->
<!--                    class="FilterTabActive"><a href="/updateaccount/4"> No Filter</a></li>-->
<!--                    <li id="upaccs" ><a href="/updateaccount/1">-->
<!--                         UP ACCS-->
<!--                    </a>-->
<!--                    </li>-->
<!--                    <li id="exitrate"><a href="/updateaccount/2"> EXIT RATE ACCS</a></li>-->
<!--                    <li id="optiesaccs"><a href="/updateaccount/3"> OPTIES ACCS-->
<!--                    </a></li>-->
<!--                </ul>-->
<!--            </div>-->

        <form  action="/updateaccount/{{id}}" method="POST"  id="Form">
            {% csrf_token %}
        

            <div class="form" >

                <div>
                    <label for="">A number</label>
                    <input type="text"  id="ANumber" name="anumber" value="{{data.a_number}}" style="border-radius: 5px; box-shadow: 2px 5px #888888;">
                </div>
                <div>
                    <label for="">Account Status</label>
                    <input type="text" id="AccountStatus" value="{{data.account_status}}" style="border-radius: 5px; box-shadow: 2px 5px #888888;" disabled>
                </div>
                <div>
                    <label for="">Last Modified</label>
                    <input type="text" id="last_modified" value="{{data.modified}}" style="border-radius: 5px; box-shadow: 2px 5px #888888;" disabled>
                </div>

                <div>
                    <label for="">Country</label>
                    <input type="text" id="Country" value="{{data.country}}" style="border-radius: 5px; box-shadow: 2px 5px #888888;" disabled>
                </div>
                <div>
                    <label for="">Last Updated By</label>
                    <input type="text" id="LastUpdatedBy" value="{{data.last_updated}}" style="border-radius: 5px; box-shadow: 2px 5px #888888;" disabled>
                </div>
                <div>
                    <label for="">Segment Source</label>
                    <input type="text" id="SegmentedSource" name="unsegmented" style="border-radius: 5px; box-shadow: 2px 5px #888888;">
                </div>
                <div>
                    <label for="">Account Name</label>
                    <input type="text" id="AccountName" value="{{data.account_name}}" style="border-radius: 5px; box-shadow: 2px 5px #888888;" disabled>
                </div>
                <div>
                    <label for="">SFDC Segmentation</label>
                    <input type="text" id="SFDCSegmentation" value="{{data.sfdc_segmentation}}" style="border-radius: 5px; box-shadow: 2px 5px #888888;" disabled>
                </div>
                <div>
                    <label for="">Entity URL</label>
                    <input type="text" id="EntityURL" name="entity_url" style="border-radius: 5px; box-shadow: 2px 5px #888888;">
                </div>

<!--                <div>-->
<!--                    <label for="">Total Count of Records</label>-->
<!--                    <input type="text" id="SFDCSegmentation" value="{{count_record}}" disabled>-->
<!--                </div>-->



            </div>
            <div style="margin-top:10px; display: flex;
    flex-direction: column;">
                    <label for="">Address</label>
                    <input type="text" id="Address" value="{{data.address}}" style="border-radius: 5px; width:500px; box-shadow: 2px 5px #888888; background: #e3e6f0;
    border: none;
    font-size: 0.9rem;
    padding: 0.5rem 0.2rem;" disabled>
                </div>
            <hr>
            <div class="form2">
                <h2>Segmentation Details</h2>
                <div>
                    <label for="">Buyside/Sellside</label>
                    <select multiple class="chosen-select"  id="Buyside">
                        <option value="">Commerical & Retail Bank</option>
                        <option value="">Investment Bank/ M&A Advisory</option>
                        <option value="">Broker/Dealer</option>
                        <option value="">Exchange</option>
                        <option value="">Inter-Broker/Dealer</option>
                        <option value="">Independent Research</option>
                        <option value="">Clearing & Securities</option>
                        <option value="">Asset Management & Investment Advisory</option>
                        <option value="">Hedge Funds</option>
                    </select>
                    <input type="hidden" name="buy" id="buysides">
                </div>
                <div>
                    <label for="">Corporate/Other</label>
                    <select multiple class="chosen-select"  id="Corporate" >
                        <option value="">Private Equity</option>
                        <option value="">Custody & Fund Accounting</option>
                        <option value="">Corporate - Energy & Basic Materials</option>
                        <option value="">Corporate - Consulting & Advisory</option>
                        <option value="">Corporate - Technology</option>
                        <option value="">Corporate - Other</option>
                        <option value="">Government</option>
                        <option value="">Academia</option>
                    </select>
                    <input type="hidden" name="corporate" id="corporates">
                </div>
                <div>
                    <label for="">Other</label>
                    <select multiple class="chosen-select" id="Other" >
                        <option value="Corporate - Retail">Corporate - Retail</option>
                        <option value="Corporate - Manufacturing">Corporate - Manufacturing</option>
                        <option value="">Wealth Management</option>
                        <option value="">Financial Technology</option>
                        <option value="">Designated Non-Financial Business</option>
                    </select>
                    <input type="hidden" name="other" id="others" >
                </div>
                <div class="btns">
                    <div><input type="checkbox" name="check" id=""> <label for="">Unavailable</label></div>
                    <span style="display:none" id="Index">0</span>
                    <button onclick="submitdd();" type="button" style="box-shadow: 5px 10px #888888;">Next</button>
                </div>
            </div>
        </form>
        </div>
        
        {% endblock %}
        {% block js%}
{% load static %}
        <script src="{% static 'js/index.js'%}"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.jquery.min.js"></script>
        <link href="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.min.css" rel="stylesheet"/>
        
        <script>
            
            $(".chosen-select").chosen({
            no_results_text: "Oops, nothing found!"
        })
        </script>
        <script>
            
         window.onload = ()=>{
                       const upaccs = document.querySelector("#ndone2");
            const exitrate = document.querySelector("#rdone3");
            const optiesaccs = document.querySelector("#thone4");
            const nofilter = document.querySelector("#stone1");
            nofilter.checked = false;
            upaccs.checked = false;
            exitrate.checked = false;
            optiesaccs.checked = false;
            if (window.location.href.split("/").at(-1).toString() == "1") {
                    upaccs.checked = true;
            } else if (
                window.location.href.split("/").at(-1).toString() == "2"
            ) {
                exitrate.checked = true;
            } else if (
                window.location.href.split("/").at(-1).toString() == "3"
            ) {
                optiesaccs.checked = true;
            }
            else if (
                window.location.href.split("/").at(-1).toString() == "4"
            ) {
                nofilter.checked = true;
            }

         }



            // const ANumber = document.querySelector("#ANumber")
            const Other = document.querySelector("#Other_chosen")
            const Corporate = document.querySelector("#Corporate_chosen")
            const Buyside = document.querySelector("#Buyside_chosen")
            const Address = document.querySelector("#Address")
            const Country = document.querySelector("#Country")
            const LastUpdatedBy = document.querySelector("#LastUpdatedBy")
            const AccountName = document.querySelector("#AccountName")
            const SFDCSegmentation = document.querySelector("#SFDCSegmentation")
            const EntityURL = document.querySelector("#EntityURL")
            const AccountStatus = document.querySelector("#AccountStatus")
            var data = JSON.parse("{{data|escapejs}}");
            function GetData(){
                
                // let Index = document.querySelector("#Index")
                // ANumber.value = data[parseInt(Index.innerText)].pk;
                // Address.value = data[parseInt(Index.innerText)].fields.address;
                // Country.value = data[parseInt(Index.innerText)].fields.country;
                // LastUpdatedBy.value = data[parseInt(Index.innerText)].fields.last_updated;
                // SegmentedSource.value = data[parseInt(Index.innerText)].fields.segment_source;
                // AccountName.value = data[parseInt(Index.innerText)].fields.account_name;
                // SFDCSegmentation.value = data[parseInt(Index.innerText)].fields.sfdc_segmentation;
                // EntityURL.value = data[parseInt(Index.innerText)].fields.entity_url;
                // AccountStatus.value = data[parseInt(Index.innerText)].fields.account_status;
                // Index.innerText = parseInt(Index.innerText) + 1
               
                
            
            

            }              
            GetData();
            function submitdd(){
                var Othertext = ""
                var Corporatetext = ""
                var Buysidetext = ""
               
               for(var i=0;i<Other.children[0].children.length-1;i++){
                Buysidetext += Other.children[0].children[i].children[0].innerText + ","
                   console.log("sds")
               }
               document.querySelector("#others").value = Othertext;
               for(var i=0;i<Corporate.children[0].children.length-1;i++){
                Buysidetext += Corporate.children[0].children[i].children[0].innerText + ","
                   console.log("sds")
               }
               document.querySelector("#corporates").value = Corporatetext;
               for(var i=0;i<Buyside.children[0].children.length-1;i++){
                Buysidetext += Buyside.children[0].children[i].children[0].innerText + ","
                   console.log("sds")
               }
               document.querySelector("#buysides").value = Buysidetext;
               
           
               document.querySelector("#Form").submit()
            }  
        </script>
        {% endblock %}
        